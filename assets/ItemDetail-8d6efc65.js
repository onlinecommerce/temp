import{k as T,ae as R,r as Y,l as j,u as G,z as J,aa as F,E as Q,F as W,af as X,I as Z,K as ee,ab as te,Y as ae,A as le,q as v,ag as ne,ah as se,n as ie,ai as oe,C as re,a as t,a3 as U,V,d as l,_ as de,a5 as me,e as i,c as y,w as a,h as I,o as f,b as c,a6 as g,aj as ue,m as ce,a4 as ge}from"./index-5056296b.js";import{I as fe}from"./ItemsOnly-96438bec.js";import{c as E,a as _,V as O,b as q,d as H,e as he,f as ve}from"./VCard-6e9ff31f.js";import{V as ye}from"./VDialog-ead1aa51.js";import{V as _e}from"./VToolbar-29776661.js";import{a as be}from"./VRow-966c884c.js";import{V as pe}from"./VChip-752bf01b.js";import"./lazy-a0a282bd.js";import"./index-2ca7d70e.js";import"./dialog-transition-01676f23.js";import"./index-3e7f2596.js";const Ie={created(){this.getItemDetail(this.$route.params.id)},data(){return{warn:!1,item:{},isActive:{value:!1}}},methods:{...T("postItem",["getItems","emptyItems","getLoading"]),...T("style",["snackingA"]),async getItemDetail(e){let o=this;await R({url:"/item",method:"get",params:{_id:e}}).then(d=>{o.item=d.data.items,o.emptyItems(),this.$route.name==="ItemDetail"&&o.getItems({category:o.item.category,subCategory:o.item.subCategory,name:o.item.name,recommand:!0,itemId:o.item._id})}).catch(d=>{})},getImg(){return this.item.image?this.item.image.url:"/src/assets/faces/ad_1.png"},async deleteAd(){await R({url:"/item",method:"delete",params:{itemId:this.item._id,authorization:`Bearer ${localStorage.getItem("sheqetoken")}`}}).then(e=>{e.data.status==="success"&&(Y.push("/"),this.snackingA({msg:"Ad deleted successfully!",type:"success",show:!0}))}).catch(e=>{console.log(e)})},prettyPrice(e){if(String(e).length>3){let o=Math.floor(String(e).length/3);o=String(e).length%3?o:o--;let d=[];e=String(e).split("").reverse().join("");for(let u=0;u<o+1;u++){let b=String(e).slice(u*3,3*(u+1)).split("").reverse().join("");d.push(b)}return e=String(e).length%3?d.reverse().join(","):d.reverse().join(",").slice(1),e}else return e},prettyDate(e){return e.split("T")[0].split("-").reverse().join("-")}},watch:{$route(e,o){this.getItemDetail(this.$route.params.id)}},computed:{...j("postItem",["items","by"]),...j("user",["loggedInUser"]),mobileSize(){let{mobile:e}=G();return e.value}},components:{ItemsOnly:fe}};const Ve=J()({name:"VRating",props:{name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:F,default:"$ratingEmpty"},fullIcon:{type:F,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},ripple:Boolean,...Q(),...W(),...X(),...Z(),...ee()},emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:d}=o;const{t:u}=te(),{themeClasses:b}=ae(e),x=le(e,"modelValue"),k=v(()=>ne(parseFloat(x.value),0,+e.length)),A=v(()=>se(Number(e.length),1)),D=v(()=>A.value.flatMap(n=>e.halfIncrements?[n-.5,n]:[n])),C=ie(-1),w=v(()=>D.value.map(n=>{const m=e.hover&&C.value>-1,s=k.value>=n,r=C.value>=n,h=(m?r:s)?e.fullIcon:e.emptyIcon,$=e.activeColor??e.color,B=s||r?$:e.color;return{isFilled:s,isHovered:r,icon:h,color:B}})),K=v(()=>[0,...D.value].map(n=>{function m(){C.value=n}function s(){C.value=-1}function r(){e.disabled||e.readonly||(x.value=k.value===n&&e.clearable?0:n)}return{onMouseenter:e.hover?m:void 0,onMouseleave:e.hover?s:void 0,onClick:r}})),L=v(()=>e.name??`v-rating-${oe()}`);function S(n){var z,N;let{value:m,index:s,showStar:r=!0}=n;const{onMouseenter:p,onMouseleave:h,onClick:$}=K.value[s+1],B=`${L.value}-${String(m).replace(".","-")}`,P={color:(z=w.value[s])==null?void 0:z.color,density:e.density,disabled:e.disabled,icon:(N=w.value[s])==null?void 0:N.icon,ripple:e.ripple,size:e.size,variant:"plain"};return t(U,null,[t("label",{for:B,class:{"v-rating__item--half":e.halfIncrements&&m%1>0,"v-rating__item--full":e.halfIncrements&&m%1===0},onMouseenter:p,onMouseleave:h,onClick:$},[t("span",{class:"v-rating__hidden"},[u(e.itemAriaLabel,m,e.length)]),r?d.item?d.item({...w.value[s],props:P,value:m,index:s,rating:k.value}):t(V,P,null):void 0]),t("input",{class:"v-rating__hidden",name:L.value,id:B,type:"radio",value:m,checked:k.value===m,tabindex:-1,readonly:e.readonly,disabled:e.disabled},null)])}function M(n){return d["item-label"]?d["item-label"](n):n.label?t("span",null,[n.label]):t("span",null,[l("Â ")])}return re(()=>{var m;const n=!!((m=e.itemLabels)!=null&&m.length)||d["item-label"];return t(e.tag,{class:["v-rating",{"v-rating--hover":e.hover,"v-rating--readonly":e.readonly},b.value,e.class],style:e.style},{default:()=>[t(S,{value:0,index:-1,showStar:!1},null),A.value.map((s,r)=>{var p,h;return t("div",{class:"v-rating__wrapper"},[n&&e.itemLabelPosition==="top"?M({value:s,index:r,label:(p=e.itemLabels)==null?void 0:p[r]}):void 0,t("div",{class:"v-rating__item"},[e.halfIncrements?t(U,null,[t(S,{value:s-.5,index:r*2},null),t(S,{value:s,index:r*2+1},null)]):t(S,{value:s,index:r},null)]),n&&e.itemLabelPosition==="bottom"?M({value:s,index:r,label:(h=e.itemLabels)==null?void 0:h[r]}):void 0])})]})}),{}}}),ke={key:0,class:"bg-slate-100"},Ce={class:"grid sm:grid-cols-3 md:grid-cols-2 mx-auto gap-1 gap-x-3"},Se={class:"border-r-2 p-2 px-10 border-slate-200"},Be={class:"rounded-pill text-white p-2 text-xs bg-gray-500",color:"red-accent-2"},we={class:"rounded-pill text-white px-3 py-3 text-sm bg-indigo-400",color:"red-accent-2"},$e={class:"rounded-circle text-white px-2 py-3 text-md bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-red-300",color:"red-accent-2"},xe={class:"p-2"},Ae=i("div",{class:"text-3xl pa-12"},"Are you sure you want to delete the ad?",-1),De={class:"me-1"},Le={class:"text-grey ms-4"},Me=i("hr",null,null,-1),Pe=i("hr",null,null,-1),ze={class:"mx-4 my-2"},Ne={class:"mx-4 my-2"},Te={class:"mx-4 my-2"},Re={class:"mt-5"},je=i("div",{class:"text-4xl text-center"},"Related Ads",-1);function Fe(e,o){const d=ge("ItemsOnly");return e.item._id?(f(),me("div",ke,[i("div",Ce,[i("div",Se,[e.mobileSize?(f(),y(E,{key:0,class:"bg-white rounded-md",width:"350",src:e.getImg(),cover:""},null,8,["src"])):(f(),y(E,{key:1,class:"bg-white rounded-md",width:"500",src:e.getImg(),cover:""},null,8,["src"])),e.item.postedBy.order===1?(f(),y(_,{key:2,class:"absolute top-0 right-0"},{default:a(()=>[i("span",Be,[t(c,null,{default:a(()=>[l("mdi-eye")]),_:1})])]),_:1})):I("",!0),e.item.postedBy.order===2?(f(),y(_,{key:3,class:"absolute top-0 right-0"},{default:a(()=>[i("span",we,[t(c,null,{default:a(()=>[l("mdi-heart")]),_:1})])]),_:1})):I("",!0),e.item.postedBy.order===3?(f(),y(_,{key:4,"prepend-icon":"mdi-folder",class:"absolute top-0 right-0"},{default:a(()=>[i("span",$e,[t(c,null,{default:a(()=>[l("mdi-diamond")]),_:1})])]),_:1})):I("",!0)]),i("div",xe,[e.item.id?(f(),y(O,{key:0,loading:e.loading,class:"mx-auto my-6","max-width":""},{default:a(()=>[t(ve,null,{default:a(()=>[t(_,null,{default:a(()=>[l(g(e.item.name)+" ",1)]),_:1}),t(ye,{transition:"dialog-top-transition",width:"auto"},ue({default:a(({isActive:u})=>[t(O,null,{default:a(()=>[t(_e,{color:"primary",title:"Deleting an ad"}),t(q,null,{default:a(()=>[Ae]),_:1}),t(H,{class:"justify-end"},{default:a(()=>[t(V,{variant:"text",onClick:b=>u.value=!1},{default:a(()=>[l("Close")]),_:2},1032,["onClick"]),t(V,{color:"primary",onClick:b=>[e.deleteAd(),u.value=!1]},{default:a(()=>[l("Delete")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},[e.loggedInUser&&(e.loggedInUser.id===e.item.postedBy.id||e.loggedInUser.role==="admin")?{name:"activator",fn:a(({props:u})=>[t(V,ce({color:"primary"},u),{default:a(()=>[l("Delete")]),_:2},1040)]),key:"0"}:void 0]),1024),t(he,null,{default:a(()=>[t(c,{color:"error",icon:"mdi-fire-circle",size:"small"}),l(),i("span",De,[l(g(e.item.category)+" ",1),t(c,null,{default:a(()=>[l("mdi-chevron-right")]),_:1}),l(g(e.item.subCategory),1)])]),_:1})]),_:1}),t(q,null,{default:a(()=>[t(be,{align:"center",class:"mx-0"},{default:a(()=>[t(Ve,{"model-value":e.item.postedBy.order,color:"amber",density:"compact","half-increments":"",readonly:"",size:"small"},null,8,["model-value"]),i("div",Le,g(e.item.postedBy.order),1)]),_:1}),t(_,{class:"my-4 text-red-500 font-extrabold"},{default:a(()=>[t(c,null,{default:a(()=>[l("mdi-cash")]),_:1}),l(" "+g(e.prettyPrice(e.item.price))+" ETB",1)]),_:1}),i("div",null,g(e.item.description),1)]),_:1}),t(_,null,{default:a(()=>[t(pe,{class:"ma-2",color:"",label:""},{default:a(()=>[t(c,{start:"",icon:"mdi-calendar-badge"}),l(" "+g(e.prettyDate(e.item.created_at)),1)]),_:1})]),_:1}),Me,Pe,t(H,null,{default:a(()=>[t(V,{color:"primary",href:`/profile-detail/${e.item.postedBy.id}`,to:`/profile-detail/${e.item.postedBy.id}`},{default:a(()=>[t(c,null,{default:a(()=>[l("mdi-link")]),_:1}),l(" "+g(e.item.postedBy.fullName),1)]),_:1},8,["href","to"])]),_:1}),i("div",ze,[t(c,null,{default:a(()=>[l("mdi-deskphone")]),_:1}),l(" "+g(e.item.postedBy.phoneNumber),1)]),i("div",Ne,[t(c,null,{default:a(()=>[l("mdi-crosshairs-gps")]),_:1}),l(" "+g(e.item.postedBy.location),1)]),i("div",Te,[t(c,null,{default:a(()=>[l("mdi-account")]),_:1}),l(" "+g(e.item.postedBy.contacts),1)])]),_:1},8,["loading"])):I("",!0)])]),i("div",Re,[je,t(d)])])):I("",!0)}const Xe=de(Ie,[["render",Fe]]);export{Xe as default};
