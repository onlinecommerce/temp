import{j as U,k as h,r as N,ae as b,l as V,u as D,_ as E,a5 as y,e as n,c as i,w as s,h as d,a,o as r,d as l,a6 as p,V as f,b as u,bh as S,a4 as T}from"./index-c246b0ec.js";import{I as B}from"./ItemsOnly-35f0edf7.js";import{V as v}from"./index-90f975fb.js";import{V as P,c as _,a as g,b as m,d as A}from"./VCard-1639cb9c.js";import{a as z,V as $}from"./VToolbar-594e8717.js";import{a as k,V as F}from"./VDivider-53923bd5.js";import{a as L,b as I}from"./VRow-50033894.js";import{V as w}from"./VChip-87a90bfd.js";import{V as c}from"./VTextField-b1f74f4e.js";import"./lazy-a0a282bd.js";import"./index-6fb56b9b.js";const O=U({created(){this.getUserDetails()},data(){return{user:null,userData:{fullName:null,phoneNumber:null,location:null,contacts:null},hasSaved:!1,isEditing:null,model:null}},methods:{...h("postItem",["getItems","getLoading","paginateUserAds"]),...h(["setToastData"]),save(){this.isEditing=!this.isEditing,this.hasSaved=!0},logout(){localStorage.removeItem("sheqetoken"),N.push("/"),window.location.reload()},async getUserDetails(){let e=this;await b({url:"/user/get-user",method:"get",params:{userId:this.$route.params.id}}).then(t=>{this.user=t.data.user,this.userData={...this.user},this.user.role!=="customer"&&e.getItems({postedBy:this.user.id,page:1,limit:this.by})}).catch(t=>{})},onBottom(){let e=this;this.allItems||setTimeout(()=>{e.paginateUserAds(e.$route.params.id)},2e3)},async updateProfile(){await b({url:"/user/update",method:"patch",data:{fullName:this.user.fullName,phoneNumber:this.user.phoneNumber,location:this.user.location,contacts:this.user.contacts},params:{authorization:`Bearer ${localStorage.getItem("sheqetoken")}`}}).then(e=>{e.data.status==="success"&&(this.setToastData({msg:"Profile updated successfully",show:!0,type:"success"}),this.getUserDetails(),this.save())}).catch(e=>{this.setToastData({msg:"Error occured",show:!0,type:"error"})})}},computed:{...V("postItem",["by","allItems"]),...V("user",["loggedInUser"]),mobileSize(){let{mobile:e}=D();return e.value}},components:{ItemsOnly:B},mounted(){window.scrollTo({top:0,left:0,behavior:"smooth"})},props:[]}),q="/assets/avatar-bce6c7a8.png",j={class:"mt-2 bg-slate-100"},R={class:"grid sm:grid-cols-2 md:grid-cols-1 mx-auto gap-1 gap-x-3"},Y={class:"rounded-pill text-white p-2 text-xs bg-gray-500",color:"red-accent-2"},G={class:"rounded-pill text-white px-3 py-3 text-sm bg-indigo-400",color:"red-accent-2"},H={class:"rounded-circle text-white px-2 py-3 text-md bg-gradient-to-r from-red-400 via-red-500 to-red-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-red-300",color:"red-accent-2"},J={key:0},K=n("div",{class:"text-4xl text-center"},"User Ads",-1);function M(e,t){const C=T("ItemsOnly");return r(),y("div",j,[n("div",R,[n("div",null,[e.user?(r(),i(P,{key:0,class:"mx-auto",color:"","max-width":e.mobileSize?"350":"600"},{default:s(()=>[a($,{flat:"",color:""},{default:s(()=>[a(z,{class:"font-weight-light"},{default:s(()=>[l(" @"+p(e.user.userName),1)]),_:1}),a(k),e.loggedInUser&&e.loggedInUser.id===e.user.id?(r(),i(f,{key:0,icon:"",onClick:t[0]||(t[0]=o=>e.isEditing=!e.isEditing)},{default:s(()=>[a(v,{"leave-absolute":""},{default:s(()=>[e.isEditing?(r(),i(u,{key:0},{default:s(()=>[l("mdi-close")]),_:1})):(r(),i(u,{key:1},{default:s(()=>[l("mdi-pencil")]),_:1}))]),_:1})]),_:1})):d("",!0),e.loggedInUser&&e.loggedInUser.id===e.user.id?(r(),i(f,{key:1,onClick:e.logout,color:"primary",size:"small",variant:"flat"},{default:s(()=>[a(v,{"leave-absolute":""},{default:s(()=>[l(" Logout ")]),_:1})]),_:1},8,["onClick"])):d("",!0)]),_:1}),a(m,null,{default:s(()=>[a(L,null,{default:s(()=>[a(I,null,{default:s(()=>[a(_,{class:"mx-auto rounded-lg",width:150,"aspect-ratio":"16/9",cover:"",src:q})]),_:1}),a(I,null,{default:s(()=>[a(w,{class:"ma-2",color:"success",label:""},{default:s(()=>[a(u,{start:"",icon:"mdi-account-circle-outline"}),l(" "+p(e.user.role),1)]),_:1}),a(w,{class:"ma-2",color:"warning",label:""},{default:s(()=>[a(u,{start:"",icon:"mdi-upload"}),l(" "+p(e.user.role==="customer"?0:e.user.postPerDay)+" Posts ",1)]),_:1}),e.user.order===1?(r(),i(g,{key:0,class:""},{default:s(()=>[n("span",Y,[a(u,null,{default:s(()=>[l("mdi-eye")]),_:1})])]),_:1})):d("",!0),e.user.order===2?(r(),i(g,{key:1,class:""},{default:s(()=>[n("span",G,[a(u,null,{default:s(()=>[l("mdi-heart")]),_:1})])]),_:1})):d("",!0),e.user.order===3?(r(),i(g,{key:2,"prepend-icon":"mdi-folder",class:""},{default:s(()=>[n("span",H,[a(u,null,{default:s(()=>[l("mdi-diamond")]),_:1})])]),_:1})):d("",!0)]),_:1})]),_:1})]),_:1}),a(m,{style:{padding:".1em 2em"}},{default:s(()=>[a(c,{modelValue:e.user.fullName,"onUpdate:modelValue":t[1]||(t[1]=o=>e.user.fullName=o),clearable:"",disabled:!e.isEditing,color:"",label:"Fullname"},null,8,["modelValue","disabled"])]),_:1}),a(m,{style:{padding:".1em 2em"}},{default:s(()=>[a(c,{modelValue:e.user.phoneNumber,"onUpdate:modelValue":t[2]||(t[2]=o=>e.user.phoneNumber=o),clearable:"",disabled:!e.isEditing,color:"",label:"Phonenumber"},null,8,["modelValue","disabled"])]),_:1}),a(m,{style:{padding:".1em 2em"}},{default:s(()=>[a(c,{modelValue:e.user.location,"onUpdate:modelValue":t[3]||(t[3]=o=>e.user.location=o),clearable:"",disabled:!e.isEditing,color:"",label:"Location"},null,8,["modelValue","disabled"])]),_:1}),a(m,{style:{padding:".1em 2em"}},{default:s(()=>[a(c,{modelValue:e.user.contacts,"onUpdate:modelValue":t[4]||(t[4]=o=>e.user.contacts=o),clearable:"",disabled:!e.isEditing,color:"",label:"Contacts"},null,8,["modelValue","disabled"])]),_:1}),a(F),a(A,null,{default:s(()=>[a(k),a(f,{color:"primary",flat:"",disabled:!e.isEditing,onClick:e.updateProfile},{default:s(()=>[l(" Save ")]),_:1},8,["disabled","onClick"])]),_:1}),a(S,{modelValue:e.hasSaved,"onUpdate:modelValue":t[5]||(t[5]=o=>e.hasSaved=o),color:"success",timeout:2e3,attach:"",position:"absolute",location:"bottom left"},{default:s(()=>[l(" Your profile has been updated ")]),_:1},8,["modelValue"])]),_:1},8,["max-width"])):d("",!0)]),e.user&&e.user.role!=="customer"?(r(),y("div",J,[K,a(C)])):d("",!0)])])}const re=E(O,[["render",M]]);export{re as default};
